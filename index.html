<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æœŸæœ«æˆ°æƒ…å®¤ // Final Quest V3</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #f0f2f5; padding-top: 50px; }
        .main-card { border-radius: 20px; border: none; box-shadow: 0 10px 25px rgba(0,0,0,0.1); transition: all 0.5s; }
        .emoji-box { font-size: 5rem; cursor: pointer; transition: transform 0.3s; }
        .emoji-box:hover { transform: scale(1.2); }
        .completed-text { text-decoration: line-through; color: #adb5bd; }
        /* é”æˆ 100% çš„ç‰¹åˆ¥æ¨£å¼ */
        .all-pass-glow { box-shadow: 0 0 25px rgba(40, 167, 69, 0.4); border: 2px solid #28a745; }
    </style>
</head>
<body>

    <div id="app" class="container">
        <div class="row justify-content-center">
            <div class="col-md-8">
                
                <div class="text-center mb-5 animate__animated animate__backInDown">
                    <h1 class="fw-bold text-dark">ğŸ æœŸæœ«å…¨æ”»ç•¥æˆ°æƒ…å®¤</h1>
                    <p class="text-muted">è·é›¢å…¨ç§‘åŠæ ¼é‚„å·®æœ€å¾Œä¸€å“©è·¯ï¼</p>
                </div>

                <div :class="['card', 'main-card', 'p-4', 'mb-4', 'text-center', 'animate__animated', 'animate__fadeIn', { 'all-pass-glow': progress === 100 }]">
                    <div class="emoji-box animate__animated animate__heartBeat animate__infinite">{{ statusEmoji }}</div>
                    <h3 class="mt-3 fw-bold text-secondary">{{ statusText }}</h3>
                    
                    <div class="progress mt-4" style="height: 25px; border-radius: 50px;">
                        <div class="progress-bar bg-success progress-bar-striped progress-bar-animated" 
                             :style="{ width: progress + '%' }">{{ progress }}%</div>
                    </div>
                </div>

                <div class="input-group mb-4 shadow-sm animate__animated animate__fadeInUp">
                    <input type="text" v-model="newTask" @keyup.enter="addTask" class="form-control form-control-lg border-0" placeholder="è¼¸å…¥æ–°çš„æŒ‘æˆ°ä»»å‹™...">
                    <button class="btn btn-primary px-4 fw-bold" @click="addTask">æ–°å¢ä»»å‹™</button>
                </div>

                <div class="list-group shadow-sm animate__animated animate__fadeInUp">
                    <div v-for="(task, index) in tasks" :key="index" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center py-3">
                        <div @click="toggleTask(index)" style="cursor: pointer; flex-grow: 1;">
                            <span :class="{ 'completed-text': task.done }" class="fs-5">
                                {{ task.done ? 'âœ…' : 'âš”ï¸' }} {{ task.content }}
                            </span>
                        </div>
                        <button class="btn btn-sm btn-outline-danger border-0" @click="removeTask(index)">ğŸ—‘ï¸</button>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

    <script>
        const { createApp, ref, computed, watch } = Vue;
        createApp({
            setup() {
                const newTask = ref('');
                const tasks = ref(JSON.parse(localStorage.getItem('final-tasks-v3') || '[]'));

                const addTask = () => {
                    if (newTask.value.trim()) {
                        tasks.value.push({ content: newTask.value, done: false });
                        newTask.value = '';
                    }
                };

                const toggleTask = (index) => { tasks.value[index].done = !tasks.value[index].done; };
                const removeTask = (index) => { tasks.value.splice(index, 1); };

                const progress = computed(() => {
                    if (tasks.value.length === 0) return 0;
                    const doneCount = tasks.value.filter(t => t.done).length;
                    return Math.round((doneCount / tasks.value.length) * 100);
                });

                // æ ¹æ“šé€²åº¦é¡¯ç¤ºä¸åŒçš„å°è¡¨æƒ… (é€™å°±æ˜¯äº’å‹•çš„æ ¸å¿ƒï¼)
                const statusEmoji = computed(() => {
                    if (tasks.value.length === 0) return 'ğŸ˜´';
                    if (progress.value === 100) return 'ğŸ¥³';
                    if (progress.value >= 50) return 'ğŸ˜';
                    return 'ğŸ˜°';
                });

                const statusText = computed(() => {
                    if (tasks.value.length === 0) return 'é‚„æ²’é–‹å§‹æŒ‘æˆ°å‘¢ï¼';
                    if (progress.value === 100) return 'å…¨æ•¸é€šéï¼ä½ æ˜¯å‚³å¥‡ï¼';
                    if (progress.value >= 50) return 'ç©©äº†ï¼ç¹¼çºŒä¿æŒï¼';
                    return 'è¶•å·¥ä¸­... åŠ æ²¹ï¼';
                });

                watch(tasks, (newVal) => {
                    localStorage.setItem('final-tasks-v3', JSON.stringify(newVal));
                }, { deep: true });

                return { newTask, tasks, addTask, removeTask, toggleTask, progress, statusEmoji, statusText };
            }
        }).mount('#app');
    </script>
</body>
</html>